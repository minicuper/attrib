module.exports = class FormCheckbox extends require('../select')
  view: __dirname
  style: __dirname
  name: 'dm-form:multipleCheckbox'

  _getExtraFields: ->
    super().concat [
      'horizontal'
    ]

  setValue:
    get: (value = [], option, options = []) ->
      v = @optionValue(option, options)
      v in value

    set: (interfaceValue, value = [], option, options = []) ->
      v = @optionValue(option, options)

      if interfaceValue
        value = value.concat [v] unless v in value
      else
        index = value.indexOf v
        if index isnt -1
          value.splice index, 1

      [value]

  getCheckedOptions: (value = [], options = []) ->
    checked = []

    for option in options
      v = @optionValue(option, options)
      checked.push @optionName(option) if v in value

    checked.join(', ')
