C = '.InputRange'
_rangeBG = $DMRangeBG ?= #008ffc
_width = 300px

// TODO: Refactor to use _gutter everywhere instead of hardcored 6px, 13px, 5px
_gutter = 6px // half of the slider thumb

// Make text overflow equally to the left and right
// http://stackoverflow.com/questions/6618648/can-overflow-text-be-centered#comment59470820_28233945
_overflowCenter()
  display flex
  justify-content center
  text-align center
  white-space nowrap
  &:before
    display flex
    content ''
    margin-left -100%
  &:after
    display flex
    content ''
    margin-right -100%

{C}
  height 18px
  position relative
  display flex
  flex-direction row
  margin-left (- _gutter)
  max-width 100%
  width _width

  &.-withOptions
    flex-basis 100%
    margin 0

  &.-disabled
    input::-webkit-slider-thumb
      background-color #656574
    input:active::-webkit-slider-thumb
      box-shadow none
    input::-moz-range-thumb
      background-color #656574
    input:active::-moz-range-thumb
      width 13px
      height @width
    {C}-backgroundLower
      background-color #9696a0

  &:not(.-disabled)
    input:active + {C}-tooltip
      visibility visible
      opacity 1

  &.-range
    flex-wrap wrap

  input
    width 100%
    appearance none
    cursor pointer
    align-self center
    background-color transparent
    outline 0
    z-index 1

  input::-webkit-slider-thumb
    -webkit-appearance none
    border-radius 50%
    width 13px
    height @width
    background-color _rangeBG
    transition box-shadow 0.1s

  input:active::-webkit-slider-thumb
    box-shadow 0 0 0 3px _rangeBG

  input::-moz-range-track
    background-color transparent

  input::-moz-range-thumb
    border-radius 50%
    width 13px
    height @width
    background-color _rangeBG
    border 0

  input:active::-moz-range-thumb
    width 18px
    height @width

  input::-moz-focus-outer
    border 0

  &-tooltip
    display flex
    justify-content center
    align-items center
    position absolute
    background-color #2e2e42
    border-radius 3px
    color #fff
    font-size 14px
    top -40px
    height 30px
    padding 0 5px
    z-index 1
    opacity 0
    visibility hidden
    transition opacity 0.5s, visbility 0.5s

    &:after
      content ''
      position absolute
      top 30px
      left 50%
      margin-left -6px
      border 6px solid transparent
      border-top 6px solid #2e2e42

  &-background
    padding 0 6px
    display flex
    position absolute
    left 0
    right 0
    top 50%
    margin-top -1px
    height 2px

  &-backgroundLower
    background-color _rangeBG
  &-backgroundUpper
    background-color #9696a0

  &-rangeValue
    width 100%
    margin-top 15px
    position absolute
    text-align center
    font-size 12px

.Input-options
  display flex
  justify-content space-between
  flex-basis 100%

.Input-item
  font-size 14px
  font-weight 600
  width (_gutter * 2)
  _overflowCenter()
