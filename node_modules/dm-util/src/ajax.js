// Generated by CoffeeScript 1.10.0
(function() {
  exports.post = function(url, data, cb) {
    var xhr;
    if (typeof window === "undefined" || window === null) {
      throw new Error('Only for client-side usage');
    }
    if (typeof data === 'function') {
      cb = data;
      data = {};
    }
    xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    xhr.setRequestHeader('Content-type', 'application/json');
    xhr.onreadystatechange = function() {
      var json;
      if (xhr.readyState !== 4) {
        return;
      }
      if (xhr.status !== 200) {
        return cb(xhr.status);
      }
      json = JSON.parse(xhr.responseText);
      return cb(null, json);
    };
    data = JSON.stringify(data);
    return xhr.send(data);
  };

}).call(this);
